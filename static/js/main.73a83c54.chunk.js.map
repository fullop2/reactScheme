{"version":3,"sources":["components/Console.jsx","index.js"],"names":["Container","styled","div","ConsoleBox","Console","props","state","currentInput","lines","inputHistoryIndex","inputHistory","inputPrefix","inputState","socket","WebSocket","consoleInput","React","onClickDisplay","bind","onKeyboardDown","this","focus","onopen","evt","onclose","writeToScreen","onmessage","console","log","data","msg","send","setState","outputData","string","e","currentLine","value","newFullLine","key","shiftKey","outputLines","map","line","onClick","onKeyDown","type","ref","readOnly","ReactDOM","render","document","getElementById"],"mappings":"+lBAIA,IAAMA,EAAYC,IAAOC,IAAV,KAOTC,EAAaF,IAAOC,IAAV,KAgIDE,E,kDA1Gb,WAAYC,GAAO,IAAD,8BAChB,cAAMA,IAfRC,MAAQ,CACNC,aAAe,GACfC,MAAQ,GAMRC,kBAAoB,EACpBC,aAAe,GACfC,YAAc,MACdC,WAAa,IAMb,EAAKC,OAAS,IAAIC,UAAU,sBAE5B,EAAKC,aAAeC,cACpB,EAAKC,eAAiB,EAAKA,eAAeC,KAApB,gBACtB,EAAKC,eAAiB,EAAKA,eAAeD,KAApB,gBAPN,E,gEAUE,IAAD,OACdE,KAAKL,aAAaM,QAElBD,KAAKP,OAAOS,OAAS,SAACC,KAItBH,KAAKP,OAAOW,QAAU,SAACD,GACnB,EAAKE,cAAc,iBAGvBL,KAAKP,OAAOa,UAAY,SAACH,GACrBI,QAAQC,IAAIL,EAAIM,MAChB,EAAKJ,cAAcF,EAAIM,S,2BAI3BC,GACHV,KAAKP,OAAOkB,KAAKD,GACjBV,KAAKY,SAAS,CAACpB,YAAa,M,oCAGhBkB,GACZA,EAAMV,KAAKa,WAAWH,GADN,IAERtB,EAAUY,KAAKd,MAAfE,MACRY,KAAKY,SAAS,CACZxB,MAAK,sBAAOA,GAAP,CAAcsB,IACnBlB,YAAa,M,iCAINsB,GACT,MAAQ,MAAQA,I,gCAERA,GACR,MAAQ,MAAQA,I,wCAEAA,GAChB,MAAQ,MAAQA,I,qCAGHC,GACbf,KAAKL,aAAaM,U,qCAGLc,GAAG,IAAD,EAC0Cf,KAAKd,MAAxDC,EADS,EACTA,aAAcG,EADL,EACKA,aAAcF,EADnB,EACmBA,MAAOG,EAD1B,EAC0BA,YACnCyB,EAAchB,KAAKL,aAAasB,MAChCC,EAAc/B,EAAe,IAAM6B,EAE5B,UAAVD,EAAEI,MACAJ,EAAEK,SACHpB,KAAKY,SAAS,CACZzB,aAAe+B,EACf5B,aAAY,sBAAOA,GAAP,CAAqBH,IACjCI,YAAc,SAIhBgB,QAAQC,IAAIU,GACZlB,KAAKY,SAAS,CACZzB,aAAe,GACfI,YAAc,QAEhBS,KAAKW,KAAKO,IAGZlB,KAAKY,SAAS,CAACxB,MAAK,sBAAOA,GAAP,CAAcG,EAAcyB,MAChDhB,KAAKL,aAAasB,MAAQ,M,+BAIrB,IAAD,SAEqCjB,KAAKd,MAAxCE,EAFF,EAEEA,MAAOG,EAFT,EAESA,YAAaC,EAFtB,EAEsBA,WACtB6B,EAAcjC,EAAMkC,KAAI,SAAAC,GAAO,OAAQ,2BAAMA,MAEnD,OACA,gBAAC3C,EAAD,CACE4C,QAASxB,KAAKH,eACd4B,UAAWzB,KAAKD,gBAClB,kDACA,gBAAChB,EAAD,KACCsC,EACA9B,EACD,yBACEmC,KAAK,OACLC,IAAK,SAAAZ,GAAI,EAAKpB,aAAeoB,GAC7Ba,SAAUpC,U,GAjHMI,aCZtBiC,IAASC,OAAO,kBAAC,EAAD,MAAaC,SAASC,eAAe,W","file":"static/js/main.73a83c54.chunk.js","sourcesContent":["import * as React from 'react';\r\nimport styled from \"styled-components\";\r\nimport './Console.css'\r\n\r\nconst Container = styled.div`\r\n  margin: 30px auto;\r\n  text-align: center;\r\n  font-weight: bold;\r\n\r\n`;\r\n\r\nconst ConsoleBox = styled.div`\r\n  margin: 30px auto;\r\n  text-align: left;\r\n  font-weight: normal;\r\n  color: #CCCC33;\r\n`;\r\n\r\nclass Console extends React.Component {\r\n  state = {\r\n    currentInput : '',\r\n    lines : [\r\n      // this.outputData(''),\r\n      // this.outputData('This is Scheme Project with React.'),\r\n      // this.outputData('From Programming Language 101 Lecture.'),\r\n      // this.outputData('')\r\n    ],\r\n    inputHistoryIndex : 0,\r\n    inputHistory : [],\r\n    inputPrefix : \">> \",\r\n    inputState : ''\r\n  };\r\n\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.socket = new WebSocket('ws://localhost:920');\r\n\r\n    this.consoleInput = React.createRef();\r\n    this.onClickDisplay = this.onClickDisplay.bind(this);\r\n    this.onKeyboardDown = this.onKeyboardDown.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n       this.consoleInput.focus();\r\n\r\n       this.socket.onopen = (evt)=>{\r\n           //doSend(\"test msg\");\r\n       };\r\n\r\n       this.socket.onclose = (evt)=>{\r\n           this.writeToScreen(\"disconnected\");\r\n       };\r\n\r\n       this.socket.onmessage = (evt)=>{\r\n           console.log(evt.data);\r\n           this.writeToScreen(evt.data);\r\n       }\r\n  }\r\n\r\n  send(msg){\r\n    this.socket.send(msg);\r\n    this.setState({inputState : true});\r\n  }\r\n\r\n  writeToScreen(msg){\r\n    msg = this.outputData(msg);\r\n    const { lines } = this.state;\r\n    this.setState({\r\n      lines : [...lines, msg],\r\n      inputState : false\r\n    });\r\n  }\r\n\r\n  outputData(string){\r\n    return ('=> ' + string );\r\n  }\r\n  inputData(string){\r\n    return ('>> ' + string );\r\n  }\r\n  continueInputData(string){\r\n    return ('.. ' + string );\r\n  }\r\n\r\n  onClickDisplay(e){\r\n    this.consoleInput.focus();\r\n  }\r\n\r\n  onKeyboardDown(e){\r\n    let { currentInput, inputHistory, lines, inputPrefix } = this.state;\r\n    const currentLine = this.consoleInput.value;\r\n    const newFullLine = currentInput + ' ' + currentLine;\r\n\r\n    if(e.key === 'Enter'){\r\n      if(e.shiftKey){\r\n        this.setState({\r\n          currentInput : newFullLine,\r\n          inputHistory : [...inputHistory, currentInput],\r\n          inputPrefix : '.. '\r\n        });\r\n      }\r\n      else{\r\n        console.log(newFullLine);\r\n        this.setState({\r\n          currentInput : '',\r\n          inputPrefix : '>> '\r\n        });\r\n        this.send(newFullLine);\r\n      }\r\n\r\n      this.setState({lines : [...lines, inputPrefix + currentLine]});\r\n      this.consoleInput.value = '';\r\n    }\r\n  }\r\n\r\n  render(){\r\n\r\n    const { lines, inputPrefix, inputState } = this.state;\r\n    const outputLines = lines.map(line=>{return (<div>{line}</div>);});\r\n\r\n    return (\r\n    <Container\r\n      onClick={this.onClickDisplay}\r\n      onKeyDown={this.onKeyboardDown}>\r\n    <h3>React Scheme Project</h3>\r\n    <ConsoleBox>\r\n    {outputLines}\r\n    {inputPrefix}\r\n    <input\r\n      type=\"text\"\r\n      ref={e=>{this.consoleInput = e;}}\r\n      readOnly={inputState}\r\n    />\r\n    </ConsoleBox>\r\n    </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Console;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n// import App from './App';\nimport Console from './components/Console'\n\nReactDOM.render(<Console />, document.getElementById('root'));\n\n"],"sourceRoot":""}